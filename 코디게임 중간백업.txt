# 이 파일에 게임 스크립트를 입력합니다.

# image 문을 사용해 이미지를 정의합니다.
# image eileen happy = "eileen_happy.png"

# 게임에서 사용할 캐릭터를 정의합니다.
define e = Character('수뭉이', color="#6ac1e4")

# 점수 변수 설정
default score = 0

# 장소, 대상, 옷차림 변수 설정
default 장소 = ""
default 대상 = ""
default 옷차림 = ""

# 화면에 점수 출력
screen score_display():
    text "Score: [score]" align (0.98, 0.02)  # 오른쪽 상단에 점수를 표시

# 화면에 카운트다운 출력
screen countdown_display(countdown):
    text "[countdown]" align (0.02, 0.02)  # 왼쪽 상단에 카운트다운 표시

# 여기에서부터 게임이 시작합니다.
label start:

    # 점수 표시 화면을 항상 띄움
    show screen score_display

    "시작 전 안내사항 (대화창을 클릭할 시 다음으로 넘어갑니다.)"
    "플레이어가 선택하는 것에 따라 최종 점수 및 결과가 달라집니다."
    "진행 중 현재 점수는 우측 상단의 Score에서 확인할 수 있습니다."
    "대화창 클릭 후 기다리시면 곧 게임을 시작합니다."
    scene black with dissolve

    e "맨날 과잠만 입고 있으니까 이젠 좀 질리네..."

    e "이번엔 기분전환도 할 겸, 학교 밖으로 나가 보는 거야!"

    e "그러려면 거기에 맞는 옷을 잘 골라 입어야겠지?"

# 아래로는 선택지입니다. 플레이어가 선택하는 것에 따라 최종 점수 및 결과가 달라집니다.
# 현재 점수변동 구현 중입니다.

label menu_with_timer:
    menu:
        "어떤 장소로 갈까?"

        "클럽":
            $ 장소 = "클럽"
            e "그래! 가끔은 클럽에 가서 신나게 춤추다 오는 것도 좋지!"
            call sub_menu_with_timer

        "도서관":
            $ 장소 = "도서관"
            e "오! 도서관에서 공부도 하고, 책도 읽으면 좋겠다."
            call sub_menu_with_timer

        "술집":
            $ 장소 = "술집"
            e "술 한 잔 하면서 피로를 푸는 것도 좋은 선택인 것 같아."
            call sub_menu_with_timer

        "카페":
            $ 장소 = "카페"
            e "헉! 수업때문에 테이크아웃은 자주 해봤는데, 매장을 이용하는 건 오랜만이야."
            call sub_menu_with_timer

label sub_menu_with_timer:
    menu:
        "어떤 사람과 함께 갈까?"

        "가족":
            $ 대상 = "가족"
            e "가족...이랑 클럽을 간다고? 뭐, 그럴 수 있지..." # 0점
            $ score += 0
            "점수에 변동이 없습니다."
            call pause_5_seconds

        "친구":
            $ 대상 = "친구"
            e "좋아, 당장 친구한테 같이 가자고 연락해 봐야지!" # +3점
            $ score += 3
            "점수가 3점 올랐습니다."
            call pause_5_seconds

        "연인":
            $ 대상 = "연인"
            e "으음... 말 꺼내면 큰일날 것 같은데. 그래, 같이 가서 즐겁게 놀다 오자고 해야지!" # 0점
            $ score += 0
            "점수에 변동이 없습니다."
            call pause_5_seconds

        "공적관계":
            $ 대상 = "공적관계"
            e "뭐?" with vpunch
            e "...좋은 생각은 아닌 것 같아, 생각해보자... 교수님이랑 클럽...? 으음." # -3점
            $ score -= 3
            "점수가 3점 내려갔습니다."
            call pause_5_seconds

    return

label pause_5_seconds:
    $ countdown = 5  # 카운트다운 초기값 설정
    show screen countdown_display(countdown)  # 카운트다운 화면 표시
    while countdown > 0:  # 카운트다운 루프
        $ countdown -= 1  # 카운트다운 감소
        pause(1.0)  # 1초 대기
    hide screen countdown_display  # 카운트다운 화면 숨김
    return

# 이어지는 메뉴와 선택지
menu_with_timer

"(안내) 이제 마지막 분기점입니다."
"연습 한 번 해볼까요?"

menu:
    "어떤 걸 입을까?"

    "(클럽, 연인을 선택했다고 가정) 정장 셋업" :
        e "상황과 대상에 맞게 입어야 할 것 같아." 
        $ score -= 8
        "이렇게 상황에 맞지 않는 옷을 고를 경우 점수가 내려갑니다"
        "점수기 8점 내려갔습니다."
        $ 옷차림 = "정장 셋업"

    call pause_5_seconds

"현재 점수는 [score]점 입니다."

"이런 식으로 점수가 계산되고, 고르는 선택지에 따라 결과가 달라집니다."
"(참고) 점수 합산에는 장소와 대상만 포함됩니다."
"날씨는 엔딩으로 넘어가기 위한 점수 세부 조정을 위한 것으로, 이 선택지에서는 고려하지 않습니다."
"이제 수뭉이가 한 말을 기억하고 신중하게 입을 옷을 골라주세요."

menu:
    "어떤 걸 입을까?"

    "코트에 긴바지" :
        e "가을엔 역시 코트지."
        $ 옷차림 = "코트에 긴바지"
        call pause_5_seconds

    "후드티에 츄리닝바지" :
        e "편한 게 짱이야."
        $ 옷차림 = "후드티에 츄리닝바지"
        call pause_5_seconds

    "정장 셋업" :
        e "오늘은 격식차린 옷을 입어야겠다."
        $ 옷차림 = "정장 셋업"
        call pause_5_seconds

    "셔츠에 청바지" :
        e "심플 이즈 베스트! 가장 무난한 것 같아."
        $ 옷차림 = "셔츠에 청바지"
        call pause_5_seconds

"현재 점수는 [score]점 입니다."

# 장소와 대상, 복장별로 if문을 사용하여 정리 **(나올 수 있는 모든 경우의 수를 고려함)**

label final_score_check:

# 장소, 대상, 의상 선택에 따른 가산점/패널티 조건 설정
    if 장소 == "클럽":
        if 대상 == "친구":
            if 옷차림 == "코트에 긴바지": 
                $ score += 8  # 적합 +8점
                e "코트에 긴바지? 잘생긴 사슴처럼 보이려나! 좋았어, 오늘 우리 중에 잘생긴 놈 역할은 나다."
            elif 옷차림 == "후드티에 츄리닝바지": 
                $ score -= 8  # 부적합 -8점
                e "클럽에 츄리닝이라니... 입구컷 당할 수도 있을 걸."
            else:
                e "그냥 보면 나쁘진 않은데, 클럽 분위기에는 맞지 않네..." # 부적합 -8점
                $ score -= 8

        elif 대상 == "가족":
            if 옷차림 == "코트에 긴바지":
                $ score += 8  # 적합 +8점
                e "이게 그나마 봐줄만 하겠다! 너무 발랑 까져보이면 좀 그러니까."
            else:
                $ score -= 8  # 부적합 -8점
                e "클럽이 가족이랑 가기 좋은 데가 아닌데... 옷이라도 잘 입는 게 좋을 것 같아."

        # 연인 및 공적관계
        elif 대상 == "연인":
            if 옷차림 == "코트에 긴바지":
                e"딱 깔끔하고 좋게 입은 것 같아!"
                $ score += 8 # 적합 +8점
            
            elif 옷차림 == "셔츠에 청바지":
                $ score += 8 # 적합 +8점
                e "나름 캐주얼하고, 막 꾸민 것 보단 이게 편하게 춤추기 좋을 것 같아."
            else:
                $ score -= 8
                e "너무 격식있거나 너무 후줄근하면 나 깨질지도 몰라
