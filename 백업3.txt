define e = Character('수뭉이', color="#6ac1e4")

default score = 0
default 장소 = ""
default 대상 = ""
default 옷차림 = ""

screen score_display():
    text "Score: [score]" align (0.98, 0.02)

screen countdown_display(count):
    text "[count]" align (0.02, 0.02)  # 왼쪽 상단에 카운트다운 표시

label start:

    show screen score_display

    "시작 전 안내사항 (대화창을 클릭할 시 다음으로 넘어갑니다.)"
    "플레이어가 선택하는 것에 따라 최종 점수 및 결과가 달라집니다."
    "진행 중 현재 점수는 우측 상단의 Score에서 확인할 수 있습니다."
    "대화창 클릭 후 기다리시면 곧 게임을 시작합니다."
    scene black with dissolve

    e "맨날 과잠만 입고 있으니까 이젠 좀 질리네..."
    e "이번엔 기분전환도 할 겸, 학교 밖으로 나가 보는 거야!"
    e "그러려면 거기에 맞는 옷을 잘 골라 입어야겠지?"

    call sub_menu_with_timer

label sub_menu_with_timer:
    menu:
        "어떤 장소로 갈까?"

        "클럽":
            $ 장소 = "클럽"
            e "그래! 가끔은 클럽에 가서 신나게 춤추다 오는 것도 좋지!"
            call clothing_choice

        "도서관":
            $ 장소 = "도서관"
            e "오! 도서관에서 공부도 하고, 책도 읽으면 좋겠다."
            call clothing_choice

        "술집":
            $ 장소 = "술집"
            e "술 한 잔 하면서 피로를 푸는 것도 좋은 선택인 것 같아."
            call clothing_choice

        "카페":
            $ 장소 = "카페"
            e "헉! 수업 때문에 테이크아웃은 자주 해봤는데, 매장을 이용하는 건 오랜만이야."
            call clothing_choice

label clothing_choice:
    $ countdown_time = 5  # 카운트다운 시간 설정
    show screen countdown_display(countdown_time)  # 카운트다운 화면 표시

    while countdown_time > 0:
        $ countdown_time -= 1
        pause(1.0)  # 1초 대기
        show screen countdown_display(countdown_time)  # 카운트다운 업데이트

    hide screen countdown_display  # 카운트다운 화면 숨기기

    menu:
        "어떤 옷을 입을까?"

        "코트에 긴바지":
            $ 옷차림 = "코트에 긴바지"
            e "가을엔 역시 코트지."

        "후드티에 츄리닝바지":
            $ 옷차림 = "후드티에 츄리닝바지"
            e "편한 게 짱이야."

        "정장 셋업":
            $ 옷차림 = "정장 셋업"
            e "오늘은 격식차린 옷을 입어야겠다."

        "셔츠에 청바지":
            $ 옷차림 = "셔츠에 청바지"
            e "심플 이즈 베스트! 가장 무난한 것 같아."

    "현재 점수는 [score]점 입니다."

    jump final_score_check

label final_score_check:
    # 장소, 대상, 의상 선택에 따른 가산점/패널티 조건 설정
    if 장소 == "클럽":
        if 대상 == "친구":
            if 옷차림 == "코트에 긴바지": 
                $ score += 8  # 적합 +8점
                e "코트에 긴바지? 잘생긴 사슴처럼 보이려나! 좋았어, 오늘 우리 중에 잘생긴 놈 역할은 나다."
            elif 옷차림 == "후드티에 츄리닝바지": 
                $ score -= 8  # 부적합 -8점
                e "클럽에 츄리닝이라니... 입구컷 당할 수도 있을 걸."
            else:
                e "그냥 보면 나쁘진 않은데, 클럽 분위기에는 맞지 않네..." # 부적합 -8점
                $ score -= 8

        elif 대상 == "가족":
            if 옷차림 == "코트에 긴바지":
                $ score += 8  # 적합 +8점
                e "이게 그나마 봐줄만 하겠다! 너무 발랑 까져보이면 좀 그러니까."
            else:
                $ score -= 8  # 부적합 -8점
                e "클럽이 가족이랑 가기 좋은 데가 아닌데... 옷이라도 잘 입는 게 좋을 것 같아."

        elif 대상 == "연인":
            if 옷차림 == "코트에 긴바지":
                e "딱 깔끔하고 좋게 입은 것 같아!"
                $ score += 8 # 적합 +8점
            
            elif 옷차림 == "셔츠에 청바지":
                $ score += 8 # 적합 +8점
                e "나름 캐주얼하고, 막 꾸민 것 보단 이게 편하게 춤추기 좋을 것 같아."
            else:
                $ score -= 8
                e "너무 격식있거나 너무 후줄근하면 나 깨질지도 몰라. 클럽가서 춤췄다가 구애의 춤을 다시 춰야할지도."

        elif 대상 == "공적관계":
            $ score -= 10  # 클럽에 어울리지 않는 조합으로 패널티 -10
            e "교수님이랑 클럽이라니, 아무리 생각해봐도 역시 이건 좀 아닌 것 같아... 뭘 입는지가 문제가 아니야..."
            jump bad_ending

    elif 장소 == "도서관":
        if 대상 == "친구":
            if 옷차림 == "정장 셋업":
                $ score -= 8 # 부적합 -8
                e "내가 직장인도 아니고...그냥 친구랑 도서관에 가는 건데 뭘 이렇게까지."
            else:
                $ score += 8  # 적합
                e "이 정도면 도서관에서도 편하게 공부할 수 있을 거야."

        elif 대상 == "가족":
            if 옷차림 == "코트에 긴바지":
                $ score += 8  # 적합 +8
                e "가족들이랑 도서관에서 이렇게 입고 공부하면 대학생티내기 딱 좋긴 하지."
            else:
                $ score -= 8
                e "그래도 좀 상황에 맞게 입는 게 낫지 않았을까?"

        elif 대상 == "연인":
            if 옷차림 == "정장 셋업":
                $ score += 8
                e "도서관 데이트를 위한 정장이라, 깔끔하고 멋있어!"
            else:
                $ score -= 8
                e "연인 앞이라 조금 더 신경 써야 하는 거 아니야?"

        elif 대상 == "공적관계":
            if 옷차림 == "셔츠에 청바지":
                $ score += 8
                e "팀플 하기엔 적절한 복장이야!"
            else:
                $ score -= 8
                e "공식적인 자리라면, 더 깔끔하게 입는 게 좋지 않을까?"

    elif 장소 == "술집":
        if 대상 == "친구":
            if 옷차림 == "셔츠에 청바지":
                $ score += 8
                e "친구들이랑 술 마시러 가기에 적당한 옷차림이야!"
            elif 옷차림 == "후드티에 츄리닝바지":
                $ score -= 8
                e "그런 옷으로 술 마시러 가기엔 너무 편한 것 같은데..."
            else:
                $ score -= 4
                e "어색하지 않지만 특별히 잘 입은 것도 아냐..."

        elif 대상 == "가족":
            if 옷차림 == "정장 셋업":
                $ score -= 10
                e "이건 무슨 비즈니스 미팅이야? 가족이랑 술집에서 이렇게 입고 가면 좀 안 맞지."
            else:
                $ score -= 8
                e "좀 더 편하게 입어야 가족과 함께 술 마시는 게 좋지 않겠어?"

        elif 대상 == "연인":
            if 옷차림 == "코트에 긴바지":
                $ score += 8
                e "상대방에게도 예쁘게 보이겠지?"
            elif 옷차림 == "후드티에 츄리닝바지":
                $ score -= 10
                e "정말 왜 이렇게 편하게 입은 거야? 분위기가 완전 안 맞는 거 같은데..."

        elif 대상 == "공적관계":
            $ score -= 8
            e "교수님과 함께 가는 자리라면 더 격식을 차려야 하지 않을까?"

    elif 장소 == "카페":
        if 대상 == "친구":
            if 옷차림 == "코트에 긴바지":
                $ score += 8
                e "잘 입은 것 같아. 카페에 가기엔 괜찮지!"
            else:
                $ score -= 4
                e "조금 더 가벼운 느낌이면 좋았을 것 같아."

        elif 대상 == "가족":
            if 옷차림 == "후드티에 츄리닝바지":
                $ score += 8
                e "편한 옷이 좋지! 가족이랑 즐거운 시간 보내려면 이런 게 제일이지!"
            else:
                $ score -= 8
                e "좀 더 신경 써야 하는 자리 아닌가?"

        elif 대상 == "연인":
            if 옷차림 == "셔츠에 청바지":
                $ score += 8
                e "너무 멋있다! 진짜 이런 옷이 잘 어울리는 것 같아."
            else:
                $ score -= 10
                e "조금 더 신경 써야 하는 자리인데... 그건 좀 아니다."

        elif 대상 == "공적관계":
            $ score -= 8
            e "이건 아마도 반칙이겠지? 이런 옷차림으로 공적인 자리엔 나가면 안 되지."

label bad_ending:
    e "이런! 예상보다 나쁜 결과가 나왔네요..."
    e "더 나은 선택을 위해 다음에 다시 도전해 보세요!"
    return

label good_ending:
    e "축하합니다! 여러분의 선택이 여러분의 결과에 잘 맞아떨어졌네요!"
    return

# 최종 결과 출력
if score >= 40:
    jump good_ending
else:
    jump bad_ending
